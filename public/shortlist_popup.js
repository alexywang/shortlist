//https://www.instagram.com/explore/locations/236420891

var restaurantObject = {
    "html_attributions" : [],
    "results" : [
       {
          "formatted_address" : "907 Dundas St W, Toronto, ON M6J 1V9, Canada",
          "geometry" : {
             "location" : {
                "lat" : 43.6509022,
                "lng" : -79.4123894
             },
             "viewport" : {
                "northeast" : {
                   "lat" : 43.65230222989273,
                   "lng" : -79.41104287010728
                },
                "southwest" : {
                   "lat" : 43.64960257010728,
                   "lng" : -79.41374252989272
                }
             }
          },
          "icon" : "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
          "googleID" : "528b9d1047c9a98da22bfbcae13da28033bfaccd",
          "name" : "Saving Grace",
          "opening_hours" : {
             "open_now" : false
          },
          "photos" : [
             {
                "height" : 1440,
                "html_attributions" : [
                   "\u003ca href=\"https://maps.google.com/maps/contrib/104639361881773430518/photos\"\u003eSonu Singh\u003c/a\u003e"
                ],
                "photo_reference" : "CmRaAAAACF1ZSNVb8XRV29uOp1pKurUBlmKTBHLAGNZh5GlI1SgYPPDq03DwS280pdlrKN7GDdSB55lqoV2rCjHjwwSWZwjvwTl18QnYTuB3IGK2y30C1X88iaT5d9IWAf6mCw5ZEhDncMVe1PNc9Lre7jDCNjmIGhRa_ur7Zqa1PBWCpIjE3jvnB1PB-A",
                "width" : 2560
             }
          ],
          "place_id" : "ChIJQTNua-U0K4gRbpvCyW4X6ZA",
          "plus_code" : {
             "compound_code" : "MH2Q+92 Toronto, Ontario, Canada",
             "global_code" : "87M2MH2Q+92"
          },
          "rating" : 4,
          "reference" : "CmRbAAAAk3Rk4-W-SOq6eqvqHh-TgdgNQg9ZHRcMIV9thF32o29jRSRv5It2jmTICFjqdP-m-lVMo4vaJcKPVPPXmfDaZOk4VENz1yfLpM02GYVmsDVSjkh5OrZAR6sqBw7ugAq7EhDBUmTyJ76RONsASILQkhRYGhQnQmcPHHElMY78QdBQGQlldedRpQ",
          "types" : [ "restaurant", "food", "point_of_interest", "establishment" ]
       }
    ],
    "status" : "OK"
};

var placeDetails = {
    "html_attributions" : [],
    "result" : {
       "address_components" : [
          {
             "long_name" : "907",
             "short_name" : "907",
             "types" : [ "street_number" ]
          },
          {
             "long_name" : "Dundas Street West",
             "short_name" : "Dundas St W",
             "types" : [ "route" ]
          },
          {
             "long_name" : "Old Toronto",
             "short_name" : "Old Toronto",
             "types" : [ "sublocality_level_1", "sublocality", "political" ]
          },
          {
             "long_name" : "Toronto",
             "short_name" : "Toronto",
             "types" : [ "locality", "political" ]
          },
          {
             "long_name" : "Toronto Division",
             "short_name" : "Toronto Division",
             "types" : [ "administrative_area_level_2", "political" ]
          },
          {
             "long_name" : "Ontario",
             "short_name" : "ON",
             "types" : [ "administrative_area_level_1", "political" ]
          },
          {
             "long_name" : "Canada",
             "short_name" : "CA",
             "types" : [ "country", "political" ]
          },
          {
             "long_name" : "M6J 1V9",
             "short_name" : "M6J 1V9",
             "types" : [ "postal_code" ]
          }
       ],
       "adr_address" : "\u003cspan class=\"street-address\"\u003e907 Dundas St W\u003c/span\u003e, \u003cspan class=\"locality\"\u003eToronto\u003c/span\u003e, \u003cspan class=\"region\"\u003eON\u003c/span\u003e \u003cspan class=\"postal-code\"\u003eM6J 1V9\u003c/span\u003e, \u003cspan class=\"country-name\"\u003eCanada\u003c/span\u003e",
       "formatted_address" : "907 Dundas St W, Toronto, ON M6J 1V9, Canada",
       "formatted_phone_number" : "(416) 703-7368",
       "geometry" : {
          "location" : {
             "lat" : 43.6509022,
             "lng" : -79.4123894
          },
          "viewport" : {
             "northeast" : {
                "lat" : 43.6523013802915,
                "lng" : -79.41104371970849
             },
             "southwest" : {
                "lat" : 43.64960341970851,
                "lng" : -79.41374168029151
             }
          }
       },
       "icon" : "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
       "googleID" : "528b9d1047c9a98da22bfbcae13da28033bfaccd",
       "international_phone_number" : "+1 416-703-7368",
       "name" : "Saving Grace",
       "opening_hours" : {
          "open_now" : true,
          "periods" : [
             {
                "close" : {
                   "day" : 0,
                   "time" : "1445"
                },
                "open" : {
                   "day" : 0,
                   "time" : "1000"
                }
             },
             {
                "close" : {
                   "day" : 1,
                   "time" : "1500"
                },
                "open" : {
                   "day" : 1,
                   "time" : "0900"
                }
             },
             {
                "close" : {
                   "day" : 3,
                   "time" : "1500"
                },
                "open" : {
                   "day" : 3,
                   "time" : "0900"
                }
             },
             {
                "close" : {
                   "day" : 4,
                   "time" : "1500"
                },
                "open" : {
                   "day" : 4,
                   "time" : "0900"
                }
             },
             {
                "close" : {
                   "day" : 5,
                   "time" : "1500"
                },
                "open" : {
                   "day" : 5,
                   "time" : "0900"
                }
             },
             {
                "close" : {
                   "day" : 6,
                   "time" : "1445"
                },
                "open" : {
                   "day" : 6,
                   "time" : "1000"
                }
             }
          ],
          "weekday_text" : [
             "Monday: 9:00 AM – 3:00 PM",
             "Tuesday: Closed",
             "Wednesday: 9:00 AM – 3:00 PM",
             "Thursday: 9:00 AM – 3:00 PM",
             "Friday: 9:00 AM – 3:00 PM",
             "Saturday: 10:00 AM – 2:45 PM",
             "Sunday: 10:00 AM – 2:45 PM"
          ]
       },
       "photos" : [
          {
             "height" : 1440,
             "html_attributions" : [
                "\u003ca href=\"https://maps.google.com/maps/contrib/104639361881773430518/photos\"\u003eSonu Singh\u003c/a\u003e"
             ],
             "photo_reference" : "CmRaAAAALR90dPmP-iWD_74CVL0gzpcUqkvEF0Kpf0nQEwpTniXwj5qBBwEsn01EgajpDw-RmHCJ4t5btdKaqAz3dQP1KtJAXmZ_LKsyS-1zsluDfxnRWNkmx5zeOfAGQ6iXJl_mEhBdsGMZ-ztxjoG7ixWiUiTXGhT0M4tSgvqTNOtF7C6_6f0stZExDw",
             "width" : 2560
          },
          {
             "height" : 1440,
             "html_attributions" : [
                "\u003ca href=\"https://maps.google.com/maps/contrib/104639361881773430518/photos\"\u003eSonu Singh\u003c/a\u003e"
             ],
             "photo_reference" : "CmRaAAAAkx8-RyFPsNE48HOEKQQI7Xu1IoGEdoXdOA9IsTn9TaLDGFuHg0w_ts8V2FEX4o8zjCN8k08-s7NIUhLeIk4OTjJ1xHn4K9nLKLIZ-UfFuzyQh1H689KW-HU7lGBvC8tFEhBN-xDH282afygDdcnmD0E3GhSKIy466a394klkSQUsWtXeEHwVYQ",
             "width" : 2560
          },
          {
             "height" : 4032,
             "html_attributions" : [
                "\u003ca href=\"https://maps.google.com/maps/contrib/100854325553268082425/photos\"\u003eMike Jacobs\u003c/a\u003e"
             ],
             "photo_reference" : "CmRaAAAA9naBOsbf29g67OtJZy6sQJ6Zk5RuE4bLmpuDhs-WznoWsUh0-vfzV7yRFaunrunKxqu4IwBp470hUQfcAf7N5r8DIBX7_OWu8usiA8vmPYxk22gyD2oyabuy1hrFmBYSEhCNL23T1w712E1hdYMgr9hYGhSJRrEeMz1pNWaDw_CpIZ4xVzGUxw",
             "width" : 3024
          },
          {
             "height" : 4048,
             "html_attributions" : [
                "\u003ca href=\"https://maps.google.com/maps/contrib/118275367402988193064/photos\"\u003eSamantha Y\u003c/a\u003e"
             ],
             "photo_reference" : "CmRaAAAARGXzrpGFuETEHp09uJea9OwI5KpjNSvRi6Bm-06ylosVmy8_CMs5aIjbicVzAR0zNNq0Jwr9uiXZU5_PWtZwEheWpvU80zUCGXUzU_7XI_DHFUXskr71lFm6e_3I3nIVEhAzIor3gmxXmRv03zHMXy4iGhRS0mlBCipfF3vdOnfee9UejFypFA",
             "width" : 3036
          },
          {
             "height" : 3264,
             "html_attributions" : [
                "\u003ca href=\"https://maps.google.com/maps/contrib/105041534389405840831/photos\"\u003eNelson Rites\u003c/a\u003e"
             ],
             "photo_reference" : "CmRaAAAAXv6Mn7Jww4dA7Lg-IDOtJvUyif0etvYjkGF-fSXCPRamFEGug-S2ZDduLuUyl3z57FPxJN_b4FZ30lJSREJJ-D35xPMQWWkL0e5R3bT-KTY1IXJCrJ54E4UdH95CJC3DEhB0wNdPVaLqUQH5AXqB60_SGhR8FUcG7vh32w1z7AaA_pGbnnPlVA",
             "width" : 2448
          },
          {
             "height" : 4048,
             "html_attributions" : [
                "\u003ca href=\"https://maps.google.com/maps/contrib/118275367402988193064/photos\"\u003eSamantha Y\u003c/a\u003e"
             ],
             "photo_reference" : "CmRaAAAA8CMqViYv1butyRf-rzIk-MtuIXVQZKN7CHLHTsa9O1jDhluo-fziH2pQImhuJbLzpWuT-MEEMuG-C-5WcryE2fly518wviL6z3hw05zRMvQgixsZ-UmN5YACnWpRc5a_EhCfX86qWIQVb7qqcdJ3oXD-GhSdafjjlgRERBP8DxPomh0zvy1Xog",
             "width" : 3036
          },
          {
             "height" : 3264,
             "html_attributions" : [
                "\u003ca href=\"https://maps.google.com/maps/contrib/111038855084815290122/photos\"\u003eEriks Bredovskis\u003c/a\u003e"
             ],
             "photo_reference" : "CmRaAAAAtUqNAbiocK2AIfHObt6s0AGCk2bcNtnxAWS-n2NPp5GRlzKmskSdwE4u_wkBJVjIPah6pCRg6hmQHiuD4TfVoKGqGxbXUsvpo06zDkguIPx3cA2WIV9nOlDsxUiI58V0EhCk2PNBWMdkPbFooZ_Ie2-OGhSuyO9innjdpXXmfEFj8Airl8JXrg",
             "width" : 2448
          },
          {
             "height" : 3024,
             "html_attributions" : [
                "\u003ca href=\"https://maps.google.com/maps/contrib/116730365329794972758/photos\"\u003ejames karrel\u003c/a\u003e"
             ],
             "photo_reference" : "CmRaAAAATJH9ObtbW9Ov6nZTQfDjUG0UVmwhS-FXt4lNJ5OuKMlmbVuhVysyYnW5sHBFQdJYdltyFlHb9QdkKxQPhosGNVeePgxBGtnXnf2FrCXUBz9xGC1a9AeJgAR9bbJOHG6mEhAAxllGVCwSf6xMFTkRpgioGhRrLVDsovrfNtDbROV4s9ebKJm70A",
             "width" : 4032
          },
          {
             "height" : 4032,
             "html_attributions" : [
                "\u003ca href=\"https://maps.google.com/maps/contrib/109071650974496300937/photos\"\u003echristina iannozzi\u003c/a\u003e"
             ],
             "photo_reference" : "CmRaAAAAHlnqMVCqngvdV5dO5qByw1qUir2ky-XOwhq6GRWMY6bXyD5uNENzoaoxTr6lTLKQKsKk8CiZ6XMr_dmQuwzfh7kEJxzfVi2DageYwPAFO_oC4-AkOMEYJPvt8M7QLDGvEhDfJW_9gBwWtx1J_Odg6TkbGhRs_fALjScgumk4JAmGQLqGz_tvEw",
             "width" : 3024
          },
          {
             "height" : 3036,
             "html_attributions" : [
                "\u003ca href=\"https://maps.google.com/maps/contrib/103076304613645593033/photos\"\u003eYazmina Wu\u003c/a\u003e"
             ],
             "photo_reference" : "CmRaAAAARkmitHKU0rcOhSp1N85YjVKoESCBb4hiy-qsHgHvGGQ4WFtI9R8YJ7tLc4Vm8oRmY-CL0L1JGJnIHbCUHCAmNdXTIfn7ZAtTaPN3vvdQskiASf9tpu8KwLuvKC2eo8zYEhCxRt1Nwz6Hn8WimoDUL0hIGhReKwdFFEb0nof77YgPdcnNkpWlDQ",
             "width" : 4048
          }
       ],
       "place_id" : "ChIJQTNua-U0K4gRbpvCyW4X6ZA",
       "plus_code" : {
          "compound_code" : "MH2Q+92 Toronto, Ontario, Canada",
          "global_code" : "87M2MH2Q+92"
       },
       "rating" : 4,
       "reference" : "CmRSAAAAC60VTDDB2XXMGPVGkckHClOZ29JKvXNCoX5SReFbTJtt1lk1R9PWvSbBobMD_rnFlxWjZeOTzL_VhJfjfP7o3kc0ZSsBfBpP-Knwqd35ZeiKjMDnaqdO_ZnjOtoiaWd0EhBu6UQbAuallGnGjvzNpDL_GhTFKyeKwlNQk4Fn9Iy_n6eHwO9f4A",
       "reviews" : [
          {
             "author_name" : "Nic Yiu",
             "author_url" : "https://www.google.com/maps/contrib/118066834082835040297/reviews",
             "language" : "en",
             "profile_photo_url" : "https://lh6.googleusercontent.com/-8ykofaKP_XA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q3ZLJLd_06ce_uvUI2TnIlKWpvsQ/s128-c0x00000000-cc-rp-mo-ba3/photo.jpg",
             "rating" : 4,
             "relative_time_description" : "a month ago",
             "text" : "I came on a weekday around 10 AM and didn’t have to wait to be seated. The space is small and homey but has an airy feeling to it. The giant mirror adds space to the room. I ordered the waffles of the day - ricotta with berry sauce. The waffles were delightful and airy. It wasn’t too sweet or overpowering, it has the perfect tangy taste of the berries with the nice hint of sweetness. \n\nThe best part was they sell half portions!! For small eaters like me, this is amazing as I am never able to finish everything on my plate. This is also great if you want to sample different dishes. \n\nOverall, I highly recommend this place but am not too impressed with the service. Though quick, the staff did not seem exceptional friendly or jolly. But perhaps it just wasn’t their day!",
             "time" : 1527290601
          },
          {
             "author_name" : "Urvashi Vyas",
             "author_url" : "https://www.google.com/maps/contrib/110737131931950552117/reviews",
             "language" : "en",
             "profile_photo_url" : "https://lh4.googleusercontent.com/-oy-8bWCjP4k/AAAAAAAAAAI/AAAAAAAAAFA/u04YsdScadM/s128-c0x00000000-cc-rp-mo-ba4/photo.jpg",
             "rating" : 5,
             "relative_time_description" : "a month ago",
             "text" : "Definitely worth the wait. This place is awesome for a lack of better words. There are so many non-typical brunch items but still the classics for those who aren't as adventurous. Unlike many popular brunch places in Toronto, they don't rush you out once you're inside. They take their time explaining things to you. I love that half portions are available as well!",
             "time" : 1527122143
          },
          {
             "author_name" : "Mike Jacobs",
             "author_url" : "https://www.google.com/maps/contrib/100854325553268082425/reviews",
             "language" : "en",
             "profile_photo_url" : "https://lh3.googleusercontent.com/-LXioCh80zJ8/AAAAAAAAAAI/AAAAAAAABzY/L8OuCzRYTIA/s128-c0x00000000-cc-rp-mo-ba3/photo.jpg",
             "rating" : 5,
             "relative_time_description" : "a month ago",
             "text" : "Wow! I’ve always wanted to go to this place and after years of putting it on the back burner we finally got to go. The food was great, the vibe is pure fun and the service was perfect. They seem to be always busy and the food takes a smidge longer than you’d expect, but it’s all so very worth it in the end. Definitely will be going back. We went on a Wednesday and there was no line, but I’ve heard they are extremely popular so count on getting there early or waiting.",
             "time" : 1527714753
          },
          {
             "author_name" : "Catt Filippov",
             "author_url" : "https://www.google.com/maps/contrib/102186184184918678123/reviews",
             "language" : "en",
             "profile_photo_url" : "https://lh5.googleusercontent.com/-M5SYBGWZNzg/AAAAAAAAAAI/AAAAAAAAAeQ/Po8InyccBJg/s128-c0x00000000-cc-rp-mo/photo.jpg",
             "rating" : 2,
             "relative_time_description" : "2 months ago",
             "text" : "I honestly didn’t understand the big deal. Why do people line up for hours in the cold for this??? The eggs were eggs. Everything else was a fun twist on something else, I guess, but was generally very underwhelming. Honestly not worth lining up in the cold for. Don’t do it. \nIf you have time to kill on a summer morning and want to find out for yourself, go right ahead. I hear their menu changes regularly so maybe you’ll have something more delicious than I did. \nThe servers were super nice, though. Five stars for them.",
             "time" : 1526211927
          },
          {
             "author_name" : "Julie Zhang",
             "author_url" : "https://www.google.com/maps/contrib/100055830728079121065/reviews",
             "language" : "en",
             "profile_photo_url" : "https://lh3.googleusercontent.com/-vXVwmxA8Ksk/AAAAAAAAAAI/AAAAAAAACeg/1ZlTTBxBOws/s128-c0x00000000-cc-rp-mo-ba3/photo.jpg",
             "rating" : 5,
             "relative_time_description" : "2 months ago",
             "text" : "This is one of the best brunch places I've ever tried. Their menu is so inventive and ever changing, with items like floral waffles and colorful salads that show you that vegetables can be addictively delicious. The first time I went was during a snowstorm, which is probably the only reason I got a table for 2 in 5 minutes (the place was still packed). Because I couldn't stop thinking about how good the food was, I tried going back the following weekend when it was warm and sunny but the wait time was over an hour... If you have time to spare on the weekend, it's totally worth the wait (pro tip -- Ella's Uncle is right across the street so you might as well grab a cup of coffee in the meantime!).",
             "time" : 1526697847
          }
       ],
       "scope" : "GOOGLE",
       "types" : [ "restaurant", "food", "point_of_interest", "establishment" ],
       "url" : "https://maps.google.com/?cid=10441902975634021230",
       "utc_offset" : -240,
       "vicinity" : "907 Dundas Street West, Toronto"
    },
    "status" : "OK"
};

var instaImages = {
    "data": [
        {
            "type": "image",
            "users_in_photo": [],
            "filter": "Earlybird",
            "tags": ["expobar"],
            "comments": {
                "count": 0
            },
            "caption": {
                "created_time": "1296532028",
                "text": "@mikeyk pulls a shot on our #Expobar",
                "from": {
                    "username": "josh",
                },
                "id": "25663923"
            },
            "likes": {
                "count": 35
            },
            "link": "http://instagr.am/p/BUS3X/",
            "user": {
                "username": "josh",
                "profile_picture": "...",
                "id": "33"
            },
            "created_time": "1296531955",
            "images": {
                "low_resolution": {
                    "url": "http://distillery.s3.amazonaws.com/media/2011/01/31/32d364527512437a8a17ba308a7c83bb_6.jpg",
                    "width": 306,
                    "height": 306
                },
                "thumbnail": {
                    "url": "http://distillery.s3.amazonaws.com/media/2011/01/31/32d364527512437a8a17ba308a7c83bb_5.jpg",
                    "width": 150,
                    "height": 150
                },
                "standard_resolution": {
                    "url": "http://distillery.s3.amazonaws.com/media/2011/01/31/32d364527512437a8a17ba308a7c83bb_7.jpg",
                    "width": 612,
                    "height": 612
                }
            },
            "user_has_liked": false,
            "id": "22097367",
            "location": {
                "latitude": 37.780885099999999,
                "id": "514276",
                "longitude": -122.3948632,
                "name": "Instagram"
            }
        },
        {
            "type": "video",
            "videos": 
            {
                "low_resolution": {
                    "url": "http://distilleryvesper9-13.ak.instagram.com/090d06dad9cd11e2aa0912313817975d_102.mp4",
                    "width": 480,
                    "height": 480
                },
                "standard_resolution": {
                    "url": "http://distilleryvesper9-13.ak.instagram.com/090d06dad9cd11e2aa0912313817975d_101.mp4",
                    "width": 640,
                    "height": 640
                },
                "users_in_photo": null,
                "filter": "Vesper",
                "tags": [],
                "comments": {
                    "count": 2
                },
                "caption": null,
                "likes": {
                    "count": 1
                },
                "link": "http://instagr.am/p/D/",
                "user": {
                    "username": "kevin",
                },
                "created_time": "1279340983",
                "images": {
                    "low_resolution": {
                        "url": "http://distilleryimage2.ak.instagram.com/11f75f1cd9cc11e2a0fd22000aa8039a_6.jpg",
                        "width": 306,
                        "height": 306
                    },
                    "thumbnail": {
                        "url": "http://distilleryimage2.ak.instagram.com/11f75f1cd9cc11e2a0fd22000aa8039a_5.jpg",
                        "width": 150,
                        "height": 150
                    },
                    "standard_resolution": {
                        "url": "http://distilleryimage2.ak.instagram.com/11f75f1cd9cc11e2a0fd22000aa8039a_7.jpg",
                        "width": 612,
                        "height": 612
                    }
                },
                "id": "3",
                "location": {
                    "latitude": 37.780885099999999,
                    "id": "514276",
                    "longitude": -122.3948632,
                    "name": "Instagram"
                }
            }
        }
]}


//Constructor for Home object
function Home(){
    this.postal = null;
    this.city = null;
    this.lat = null;
    this.lng = null;
}

//Constructor for the Restaurant object
function Restaurant(){
    //GOOGLE
    this.googleID = null;
    this.name = null;
    this.address = null;
    this.lat = null;
    this.lng = null; 
    this.distance = null;
    this.rating = null;
    this.openNow = null;
    this.openingHours = null;
    //INSTAGRAM
    this.instaID = null;
    //FACEBOOK
    this.facebookID = null;
    this.website = null;
    this.about = null;
    this.description = null;
}


//=========================
//BASIC FUNCTIONS
//=========================

//Go to URL and parse the restaurant's name, return it. 
function getInputtedName(){
    var uncleanName = window.location.href.split('=')[1];
    var parameterReg = /\+/gi; //replace all + with blank space
    return uncleanName.replace(parameterReg, " ");
}

//Print the restaurant name on the HTML code 
function printRestaurantName(restaurant){
    let pageTitle = document.getElementById("restaurantName");
    pageTitle.innerHTML = restaurant.name;
}

//HTTP Get Request Function
function getAPIData(url){

    //Promise for jsonData to be returned after async process
    return new Promise(function(resolve, reject){
        var request = new XMLHttpRequest();
        //url = "https://jsonplaceholder.typicode.com/posts/42"; //testing code
        var jsonData;
    
        request.onreadystatechange = function(){
            if(this.readyState == 4 && this.status == 200){
                //console.log(request.responseText);
                jsonData = JSON.parse(request.responseText);
                resolve(jsonData);
                //resolve(restaurantObject); //temporary until API works

            }
        };
        
        request.open("GET", url, true);
        request.send();
         
    });
    
}


//=========================
//GOOGLE MAPS ||            API KEY: AIzaSyA8GJ9n0WqR2SXcDQUqxDBHIwbJ1bPA6YA
//=========================

//Intial Map to be Shown
function initMap(){
    var options = {
        zoom:16,
    };
    var map = new google.maps.Map(document.getElementById('map'), options);
}

//Show Map After Processing
function showMap(restaurant, home){ //pass a restaurant as parameter, use restaurant properties to create map
    //Configure map appearance on startup

    //Set coordinates of the intial map centre, restuarant and home. 
    var centerLatLng = new google.maps.LatLng( (restaurant.lat+home.lat)/2, (restaurant.lng+home.lng)/2 );
    var restaurantLatLng = new google.maps.LatLng(restaurant.lat, restaurant.lng);
    var homeLatLng = new google.maps.LatLng(home.lat, home.lng);

    var options = { 
        zoom:16,
        center:centerLatLng
    };
    //Map variable
    var map = new google.maps.Map(document.getElementById('map'), options),
    //Instantiate directions API
    directionsService = new google.maps.DirectionsService();
    directionsDisplay = new google.maps.DirectionsRenderer({
        map: map
    }); 

    //Show route from home to restaurant and set distance in restaurant object
    showRoute(directionsService, directionsDisplay, homeLatLng, restaurantLatLng, function(distance){
        restaurant.distance = distance;
    });
    


    //Route function
    function showRoute(directionsService, directionsDisplay, pointA, pointB, callback){
        directionsService.route({
            origin: pointA,
            destination: pointB,
            travelMode: google.maps.TravelMode.WALKING
        }, function(response, status){
            if(status == google.maps.DirectionsStatus.OK){
                directionsDisplay.setDirections(response);
            }else{
                window.alert("Direcitons failed: "+ status);
            }
        });
        
        
    }
    
    //Add restaurant marker
    // var restaurantMarker = new google.maps.Marker({
    //     position:restaurantLatLng,
    //     map:map
    // });

    // //Add info window, open On Click
    // var infoWindow = new google.maps.InfoWindow({
    //     content: '<h3>Test</h3>' //Replace this data acquired from Places API 
    // });
    // restaurantMarker.addListener('click', function(){
    //     infoWindow.open(map, restaurantMarker);
    // });

    //Add home marker
    // var homeMarker = new google.maps.Marker({
    //     position:homeLatLng,
    //     map:map
    // });
    

}

//Get Distance from point A and B async and send to callback
function getDistance(pointA, pointB, callback){
    var directionsService = new google.maps.DirectionsService();
    directionsService.route({
        origin: pointA,
        destination: pointB,
        travelMode: google.maps.TravelMode.WALKING
    }, function(response, status){
        if(status == google.maps.DirectionsStatus.OK){
            directionsDisplay.setDirections(response);
            callback(Math.round(directionsDisplay.getDirections().routes[directionsDisplay.getRouteIndex()].legs[0].distance.value));
        }else{
            window.alert("Directions failed: "+status);
        }
    });
}

//========================
//GOOGLE PLACES ||          API KEY: AIzaSyA8GJ9n0WqR2SXcDQUqxDBHIwbJ1bPA6YA
//========================

var key = "AIzaSyA8GJ9n0WqR2SXcDQUqxDBHIwbJ1bPA6YA";

//Return a URL for Google Places Place Search 
function getPlacesURL(restaurant, home){
    var restaurantName = restaurant.name;
    var formattedName = restaurantName.replace(" ", "+");
    var address = formattedName+"+in+"+home.city;
    var url = "https://maps.googleapis.com/maps/api/place/findplacefromtext/json?";
    url += "input="+address;
    url += "&inputtype=textquery";
    url += "&fields=formatted_address,name,rating,opening_hours,geometry";
    url += "&key="+key;
    //document.write(url);
    return url;
}
//Returns a URL for Google Places Text Search 
function getGoogleTextSearchURL(restaurant, home){
    var restaurantName = restaurant.name;
    var formattedName = restaurantName.replace(" ", "+");
    var address = formattedName+"+near+"+home.postal;
    var url = "https://maps.googleapis.com/maps/api/place/textsearch/json?";
    url += "query="+address;
    url += "&key="+key;
    //document.write(url);
    return url;
}

//Returns a URL for Google Places Details. Warning: This requires Place ID that must be acquired through Text Search first
function getGoogleDetailsURL(restaurant){
    var url = "https://maps.googleapis.com/maps/api/place/details/json?";
    url += "placeid="+restaurant.googleID;
    url += "&key="+key;
    return url;
}



//FOLLOWING FUNCTIOJNS use JSON returned by the Places Search to return certain values
//Name
function getRestaurantName(googleObject){
    return googleObject.results[0]["name"];
}
//Address
function getRestaurantAddress(googleObject){
    return googleObject.results[0]["formatted_address"];
}
//Latitude
function getRestaurantLat(googleObject){
    return googleObject.results[0]["geometry"]["location"]["lat"];
}
//Longitude
function getRestaurantLng(googleObject){
    return googleObject.results[0]["geometry"]["location"]["lng"];
}
//Rating
function getRestaurantRating(googleObject){
    return googleObject.results[0]["rating"];
}
//Places ID
function getRestaurantID(googleObject){
    return googleObject.results[0]["place_id"];
}
//Open Now Boolean
function getRestaurantOpenNow(googleObject){
    return googleObject.results[0]["opening_hours"]["open_now"];
}

//FOLLOWING FUNCTIONS use JSON returned by the Places Detail to return certain values
function getRestaurantHours(googleObject){
    return googleObject.result["opening_hours"]["weekday_text"];
}

function printRestaurantInfo (restaurant, divID){
    var div = document.getElementById(divID);
    var walkingpersec = 1.4;
    var drivingpersec = 16.67;
    div.innerHTML += "Distance: "+Math.round(restaurant.distance/100)/10+" km "+"("+Math.ceil(restaurant.distance/walkingpersec/60)+" minute walk, "+Math.ceil(restaurant.distance/drivingpersec/60)+" mintute drive) <br>";
    div.innerHTML += "Rating: "+restaurant.rating+"<br>";
    div.innerHTML += "Address: "+restaurant.address+"<br>";

    if(restaurant.openNow){
        div.innerHTML += restaurant.name+" is open now. <br>";
    }else{
        div.innerHTML += restaurant.name+" is closed now.<br>";
    }

    //Match system day integer with corresponding index given by google
    var d = new Date();
    var day = d.getDay() - 1;
    if(day == -1){
        day = 7;
    }

    div.innerHTML += "Opening Hours for "+restaurant.openingHours[day]+"<br>";


}


//============================
//FACEBOOK API
//============================

//Get Facebook API Token


//Returns URL for Facebook Places Search HTTP Request
function getFbPlacesSearchURL(restaurant){
    var distance = 500;
    var url = "https://graph.facebook.com/search?type=place&fields=about,description,website&q="+restaurant.name+"&center="+restaurant.lat+","+restaurant.lng+"&distance="+distance;
    return url;
}



//=========================
//INSTAGRAM API
//=========================

//Returns Instagram Token from Local Storage or default token if not found
function getInstaToken(){
    var url = window.location.href
    var splitURL = url.split("?");
    if(splitURL[0] == "http://127.0.0.1:5500/public/shortlist_popup.html"){
        console.log("No token found.");
        return "37737826.ddf68b9.6234ba6f1aca4dc087fe225d8466668d";
    }
    else{
        console.log(this.sessionStorage.getItem("InstaToken"));
        return this.sessionStorage.getItem("instaToken");
    }
}

//Returns URL for Instagram Location Search Endpoint 
function getInstaLocSearchURL(restaurant){
    var token = getInstaToken();
    var distance = 100;
    var url = "https://api.instagram.com/v1/locations/search?lat="+restaurant.lat+"&lng="+restaurant.lng+"&distance="+distance+"&access_token="+token;

    //!!Once working, this should be updated to use Facebook Places ID instead Lat/Lng
    //var url = "https://api.instagram.com/v1/locations/search?facebook_places_id="+restaurant.facebookID+"&distance="+distance+"&access_token="+token; 
    
    console.log(url);
    return url;   
}

//Returns URL for Instagram Location Recent Media Endpoint
function getInstaLocMediaURL(restaurant){
    var token = getInstaToken();
    //https://api.instagram.com/v1/locations/{location-id}/media/recent?access_token=ACCESS-TOKEN
    var url = "https://api.instagram.com/v1/locations/"+restaurant.instaID+"/media/recent?access_token="+token;
    return url;
}

function getExploreURL(restaurant){
    var url = "https://www.instagram.com/explore/locations/"+restaurant.instaID;
    return url;
}

//Find closest match for location from a returned Location Search Endpoint JSON compared to LatLng returned from google
function findMatchingEntry(obj, restaurant){
    //Check returned names based on the restaurant's name 
    var referenceStrings = restaurant["name"].split(" "); 

    var mostMatches = 0; //Keep track of the highest number of matches found
    var matchingIndex; //Keep track of which index the most matches was found at

    //Iterate through every location in instaObject, return location id of the closest match
    for(var index = 0; index < obj["data"].length; index++){
        var matches = 0;
        var nameStrings = obj["data"][index]["name"].split(" ");
        for(var i = 0; i < referenceStrings.length; i++){
            for(var j = 0; j < nameStrings.length; j++){
                if(referenceStrings[i] === nameStrings[j]){
                    matches ++;
                }
            }
        }
        //If this index of data has more than the current index with most matches, record this one instead.
        if(matches > mostMatches){
            mostMatches = matches;
            matchingIndex = index;
        } 
        //Check if we just found a perfect match and we can the search early
        if(mostMatches == referenceStrings.length){
            break;
        }
    }
    return obj["data"][matchingIndex];
}

//Parse Instagram Pictures from a returned API object
function parseInstaImages(instaObject){
    var images = [];
    //Parse each index of data in the object and put it in the next empty index of images[]
    for(var index = 0; index < instaObject.data.length; indedx++){
        if(instaObject.data[index].type == "image"){
            var mediaType = "image";
            var link = instaObject.data[index].images.standard_resolution.url;
            images.push({type:mediaType, src:link});
        }else if(instaObject.data[index].type == "video"){
            var mediaType = "video";
            var link = instaObject.data[index].videos.standard_resolution.url;
        }
    }
    return images;
}


///Hardcoded Standard Defintion Dimensions of Instagram Media 
function imageDimensions(){
    var dimensions = {
        width: 612,
        height: 612
    }
    return dimensions;
}
function videoDimensions(){
    var dimensions = {
        width: 640,
        height: 640
    }
    return dimensions;
}


//Create Instagram IFrame
function generateInstaFrame(divID, src){
    var iframe = document.createElement("iframe");
    iframe.setAttribute("src", src);
    iframe.setAttribute("id", "instaFrame")

    div = document.getElementById(divID);
    div.appendChild(iframe);
    document.getElementById("instaFrame").scrollTo(1000,1000)
}

//Bypass XFrame Limitations
function bypassIframe(divID){

}

//GETTER FUNCTIONS for Instagram Places Search Endpoint Object Entry
//Location ID
function getInstaID(matchingEntry){
    return matchingEntry["id"];
}



//==========================================================
//MAIN METHOD?? Run functions like this when the page loads 
//==========================================================

window.onload = function(){
    var myRestaurant = new Restaurant();
    var myHome = new Home();

    //Set home (TEMP HARDCODE)
    myHome.lat = 43.6534;
    myHome.lng = -79.384293;
    myHome.city = "Toronto";
    myHome.postal = "M5H2N2"

    //Get the initially inputted restaurant name
    myRestaurant.name = getInputtedName();
    
    //Define div for testing output
    let objectDiv = document.getElementById("objectDiv");

    //!!ASYNC CHAIN #1: HTTP request to Google Places Text Search. Full JSON for Place Search is returned as the resolvedValue async'ly
    getAPIData(getGoogleTextSearchURL(myRestaurant, myHome)).then(function(textSearchObject){
        //Set values with full JSON to create refined myRestaurant object
        myRestaurant.address = getRestaurantAddress(textSearchObject);
        myRestaurant.lat = getRestaurantLat(textSearchObject);
        myRestaurant.lng = getRestaurantLng(textSearchObject);
        myRestaurant.rating = getRestaurantRating(textSearchObject);
        myRestaurant.googleID = getRestaurantID(textSearchObject);
        myRestaurant.openNow = getRestaurantOpenNow(textSearchObject);
        myRestaurant.name = getRestaurantName(textSearchObject);
        printRestaurantName(myRestaurant);
    
        //console.log(getGoogleDetailsURL(myRestaurant));

        //!!ASYNC CHAIN #2: HTTP request to Google Places Details
        getAPIData(getGoogleDetailsURL(myRestaurant)).then(function(detailsObject){
            //Set values with full JSON to further create refiend myRestaurant object
            myRestaurant.openingHours = getRestaurantHours(detailsObject); //!!!SHOULD BE!!! resolvedValue, temp hardcode until API works

            //Use data from myRestaurant and myHome objects to draw the map
            showMap(myRestaurant, myHome); 

            //!!ASYNC CHAIN #3: Use Directions Service to get distance and return it as the resolvedValue
            getDistance(new google.maps.LatLng(myHome.lat, myHome.lng), new google.maps.LatLng(myRestaurant.lat, myRestaurant.lng), function(distance){
                myRestaurant.distance = distance;

                //!!ASYNC CHAIN #4: HTTP Request to Facebook Places Graph Search (PUT ASYNC 5 INTO THIS WHEN COMPLETED!)
                // getAPIData(getFbPlacesSearchURL(myRestaurant)).then(function(facebookObject){
                //     var matchingEntry = findMatchingEntry(facebookObject, myRestaurant);
                //     console.log(matchingEntry);
                //     console.log(getInstaID(matchingEntry));
                //     myRestaurant.instaID = getInstaID(matchingEntry);

                    
                // });
                
                //!!ASYNC CHAIN #5: AJAX request to Instagram Endpoint (Location Search), JSONP supported. This is just to get Instagram ID to be used for antoher search.
                $.ajax({
                    url: getInstaLocSearchURL(myRestaurant),
                    type: "GET",
                    crossDomain: true,
                    dataType: "jsonp",
                    success: function(locationSearchObject){ //Returns Instagram data for found nearby locations
                        console.log(myRestaurant.lat);
                        console.log(myRestaurant.lng);
                        console.log(locationSearchObject);
                        //Usually Instagram and Google LatLng's do not match, find the correct entry in the returned JSON
                        console.log(findMatchingEntry(locationSearchObject, myRestaurant));
                        myRestaurant.instaID = getInstaID(findMatchingEntry(locationSearchObject, myRestaurant));

                        //TESTING PURPOSES
                        //objectDiv.innerHTML += "<br>";  
                        //objectDiv.innerHTML += JSON.stringify(myRestaurant);
                        
                        //Create Instagram IFrame
                        console.log("hello");
                        generateInstaFrame("instaImages", getExploreURL(myRestaurant));
                        printRestaurantInfo(myRestaurant, "restaurant-info");

                        //!!ASYNC CHAIN #6: AJAX request to Instagram Endpoint (Recent Location Media), JSONP supported.
                        // $.ajax({
                        //     url: getInstaLocMediaURL(myRestaurant),
                        //     type: "GET",
                        //     crossDomain: true,
                        //     dataType: "jsonp",
                        //     success: function(locationMediaObject){
                        //         console.log(getInstaLocMediaURL(myRestaurant));
                        //         console.log(locationMediaObject);
                        //     }
                        // });
                    }
                });
            });
        });
    });
}

